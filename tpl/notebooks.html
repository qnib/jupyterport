{{ define "notebooks" }}

<!DOCTYPE html>
<html lang="en">
  {{ template "header" }}

  <body>

    {{ template "navbar" }}

    <div class="container">

      <div class="starter-template">
        <h1>Notebooks of {{ .User }}</h1>
          <table style="width:100%">
              <tr align="center">
                  <th>Status</th>
                  <th>Name</th>
                  <th>Link</th>
                  <th>Actions</th>
              </tr>
          {{range .Notebooks}}
              <tr align="center">
                  <td>{{ .Status }}</td><td>{{ .Name }}</td><td>{{ if eq .Status "Running"}} -> <a target="_blank" href="{{ .Path }}/tree?token={{ .Token }}">Proxy</a>{{else}}Not running yet{{end}}</td>
                  <td><form action="/delete-notebook" method="post">
                      <input type="hidden" id="user" name="user" value="{{.User}}">
                      <input type="hidden" id="nbname" name="nbname" value="{{.Name}}">
                      <button type="submit">Delete</button>
                  </form></td>
              </tr>
          {{end}}
          </table>
      </div>
        {{ if not .Authenticated }}
        <form action="/personal" method="post">
            <label for="uname"><b>Username</b></label>
            <input type="text" value="test" name="uname" required>
            <button type="submit">Create</button>
        </form>
        {{else}}
            <form action="/start-notebook" method="post">
                <label for="nbname"><b>Notebook Name</b></label>
                <input type="text" value="mynotebook" name="nbname" required><br>
                <label for="cntimage"><b>Container Image</b></label>
                <select name="cntimage">
                    {{range .JupyterImages}}
                        <option value="{{.Name}}">{{.Name}}</option>
                    {{end}}
                </select><br>
                <label for="nbimage"><b>Notebook Image</b></label>
                <select name="nbimage">
                {{range .NotebookImages}}
                    <option value="{{.Name}}">{{.Name}}</option>
                {{end}}
                </select><br>
                <label for="dataimage"><b>Data Image</b></label>
                <select name="dataimage">
                {{range .DataImages}}
                    <option value="{{.Name}}">{{.Name}}</option>
                {{end}}
                </select><br>
                <!--<input type="text" name="cntimage" value="qnib/uplain-jupyter-base-notebook:latest" required><br>-->
                <label for="cnt-gpu"><b>#GPUs</b></label>
                <input type="text" name="cnt-gpu" value="0" required><br>
                <label for="cnt-rcuda"><b>#rCUDA GPUs</b></label>
                <input type="text" name="cnt-rcuda" value="0" required><br>
                <button type="submit">Create</button>
            </form>
        {{ end }}
    </div><!-- /.container -->

    {{ template "footer" }}
  </body>
</html>
{{ end }}
